{"version":3,"file":"kaysh.cjs.development.js","sources":["../src/lib/_aux.ts","../src/lib/simple-cache-store.ts","../src/lib/rxjs-cache-store.ts"],"sourcesContent":["export function __strToHash(str = ''): string {\r\n  let hash = 0,\r\n    i,\r\n    chr;\r\n\r\n  for (i = 0; i < str.length; i++) {\r\n    chr = str.charCodeAt(i);\r\n    hash = (hash << 5) - hash + chr;\r\n    hash |= 0;\r\n  }\r\n\r\n  return hash.toString(36);\r\n}\r\n\r\nfunction getShortValue(val: any) {\r\n  if (Number.isInteger(val) && String(val).length) return 'num_' + val;\r\n\r\n  if (typeof val === 'string') {\r\n    if (val.length === 0) return 'emptyString__';\r\n    return 'str_' + val;\r\n  }\r\n\r\n  if (Array.isArray(val)) {\r\n    if (val.length === 0) return 'emptyArray__';\r\n\r\n    if (val.length === 1) {\r\n      if (Number.isInteger(val[0]) && String(val[0]).length) return '_num_' + val[0];\r\n\r\n      if (typeof val[0] === 'string') {\r\n        if (val[0].length === 0) return '_emptyString__';\r\n        return '_str_' + val[0];\r\n      }\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function __objToHash(val: any, fast = true) {\r\n  if (val === undefined) return '__undefined__';\r\n  if (val === null) return '__null__';\r\n\r\n  if (fast) {\r\n    let shortValue = getShortValue(val);\r\n    if (shortValue != null && shortValue.length > 0 && shortValue.length < 32) return shortValue;\r\n  }\r\n\r\n  return __strToHash(JSON.stringify(val));\r\n}\r\n","import { __objToHash } from './_aux';\r\n\r\nconst _isTest = process.env.NODE_ENV === 'test';\r\n\r\nif (_isTest) if (false) console.log('test');\r\n\r\nconst _log = console.log;\r\n\r\nlet _localStorageParentKey = 'KAYSH-V1';\r\nlet _localStorageMaxGlobalTime = 0;\r\nlet _localStorage;\r\nlet _localStorageLoaded = false;\r\nlet _keyshEnabled = true;\r\nlet _keyshLocalStorageEnabled = true;\r\ndeclare var window;\r\n\r\nconst memoFuncPrefixId = 'KAYSH-CACHE-MEMO-FUNC__';\r\n\r\n_localStorage = window?.localStorage;\r\n\r\nexport interface StoredValueModelObjRoot {\r\n  [key: string]: StoredValueModelObj;\r\n}\r\n\r\nexport interface StoredValueModelObj {\r\n  [key: string]: StoredValueModel;\r\n}\r\n\r\nexport interface StoredValueModel {\r\n  value: any;\r\n  date: number;\r\n  localStored?: boolean;\r\n  config?: DefaultConfigCacheModel;\r\n}\r\n\r\nexport interface DefaultConfigCacheModel {\r\n  localStorage?: boolean;\r\n  maxTime?: number;\r\n  maxItems?: number;\r\n}\r\n\r\nconst defaultConfig: DefaultConfigCacheModel = {\r\n  localStorage: false,\r\n  maxTime: 0,\r\n  maxItems: 10,\r\n};\r\n\r\nlet store_state: StoredValueModelObjRoot = {};\r\n\r\nfunction setCacheValue(key: string, value: any, argsToHash?: any, config?: DefaultConfigCacheModel) {\r\n  if (_keyshEnabled !== true) return;\r\n  if (key == null) return;\r\n  if (value === undefined) return;\r\n\r\n  const _hash = __objToHash(argsToHash);\r\n\r\n  const _obj = {\r\n    value,\r\n    date: Date.now().valueOf(),\r\n    localStored: false,\r\n    config: {\r\n      ...defaultConfig,\r\n      ...(config || (store_state[key] || {})?.config),\r\n    },\r\n  };\r\n\r\n  //Add Obj\r\n  let stateObjs: StoredValueModelObj = {\r\n    ...store_state[key],\r\n    [_hash]: _obj,\r\n  };\r\n\r\n  //Check MaxItems\r\n  let maxItems = Number(_obj?.config?.maxItems);\r\n  let obj = store_state[key];\r\n  if (obj != null && Object.keys(obj).length > Number(maxItems)) stateObjs = __sortStoredValueModelByDate(stateObjs, maxItems);\r\n\r\n  store_state[key] = stateObjs;\r\n\r\n  if (false) _log(JSON.stringify({ store_state, _hash, argsToHash }, null, 2));\r\n\r\n  if (__isValidLocalStorageItem(value) && config?.localStorage === true) __updateLocalStorage();\r\n\r\n  //check Promise\r\n  if (__isPromise(value)) {\r\n    value.then(_val => {\r\n      if (_val != null) setCacheValue(key, _val, argsToHash, config);\r\n    });\r\n  }\r\n}\r\n\r\nfunction getCacheValue(key: string, argsToHash?: any): any {\r\n  if (_keyshEnabled !== true) return null;\r\n\r\n  if (true && typeof window !== 'undefined' && _localStorageLoaded === false) __setLocalStoredToStore();\r\n\r\n  if (store_state[key] == null) return store_state[key];\r\n\r\n  const _hash = __objToHash(argsToHash);\r\n  const objKeyValue: StoredValueModel = store_state[key][_hash];\r\n  if (objKeyValue == null) return objKeyValue;\r\n\r\n  if (false && _isTest) _log(JSON.stringify(store_state, null, 2));\r\n\r\n  //Is maxTime\r\n  if ((objKeyValue.config?.maxTime || objKeyValue.config.localStorage) && !__checkValidItemDate(objKeyValue)) return null;\r\n\r\n  if (objKeyValue.value == null) return objKeyValue.value;\r\n\r\n  if (typeof objKeyValue.value === 'object') return Object.freeze(objKeyValue.value);\r\n\r\n  return objKeyValue.value;\r\n}\r\n\r\nfunction resetCache(key: string, argsToHash?: any) {\r\n  if (key == null) return;\r\n\r\n  if (argsToHash !== undefined) {\r\n    const _hash = __objToHash(argsToHash);\r\n    if (store_state && key in store_state && _hash in store_state[key]) {\r\n      let resetLocalStorage = __isLocalStorageItem(store_state[key][_hash]);\r\n\r\n      delete store_state[key][_hash];\r\n\r\n      if (resetLocalStorage) __updateLocalStorage();\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (store_state && key in store_state) {\r\n    delete store_state[key];\r\n    __updateLocalStorage();\r\n  }\r\n}\r\n\r\nfunction resetAllCaches() {\r\n  store_state = {};\r\n  __clearLocalStorage();\r\n}\r\n\r\nfunction memoFunction(func: Function, prefixId: string = memoFuncPrefixId, config?: DefaultConfigCacheModel): Function {\r\n  let funcName = func.name || '__memoized';\r\n  let funcKey = prefixId + func.name;\r\n\r\n  if (false) _log('funcName', funcName);\r\n\r\n  var object = {\r\n    [funcName]: function(...restArgs) {\r\n      const cache = getCacheValue(funcKey, restArgs);\r\n      if (cache !== undefined) return cache;\r\n\r\n      const res = func.apply(this, restArgs);\r\n      setCacheValue(funcKey, res, restArgs, config);\r\n      return res;\r\n    },\r\n  };\r\n\r\n  return object[funcName];\r\n}\r\n\r\nfunction resetMemoFunction(funcOrName: Function | string, prefixId: string = memoFuncPrefixId): Function {\r\n  let funcKey;\r\n\r\n  if (typeof funcOrName === 'string') {\r\n    funcKey = prefixId + funcOrName;\r\n  } else {\r\n    funcKey = prefixId + funcOrName.name;\r\n  }\r\n\r\n  const memoizedReset = function(...restArgs) {\r\n    if (restArgs !== undefined && restArgs.length) {\r\n      resetCache(funcKey, restArgs);\r\n    } else {\r\n      resetCache(funcKey);\r\n    }\r\n  };\r\n\r\n  return memoizedReset;\r\n}\r\n\r\nfunction memoFunctionDecorator(config?: DefaultConfigCacheModel, prefixId?) {\r\n  const instanceMap = new WeakMap();\r\n  return (target, propertyKey, descriptor) => {\r\n    const input = target[propertyKey]; // eslint-disable-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\r\n\r\n    if (typeof input !== 'function') {\r\n      throw new TypeError('The decorated value must be a function');\r\n    }\r\n\r\n    delete descriptor.value;\r\n    delete descriptor.writable;\r\n\r\n    descriptor.get = function() {\r\n      if (!instanceMap.has(this)) {\r\n        const value = memoFunction(input, prefixId, config);\r\n        instanceMap.set(this, value);\r\n        return value;\r\n      }\r\n      return instanceMap.get(this);\r\n    };\r\n  };\r\n}\r\n\r\nfunction __sortStoredValueModelByDate(StoredValuel: StoredValueModelObj, max: number = Infinity): StoredValueModelObj {\r\n  return Object.entries({ ...StoredValuel })\r\n    .sort(([, a], [, b]) => Number(b.date) - Number(a.date))\r\n    .slice(0, max)\r\n    .reduce((r, [k, v]) => ({ ...r, [k]: v }), {} as any);\r\n}\r\n\r\nfunction __isRxjsObservableObj(value: any) {\r\n  if (value == null) return false;\r\n\r\n  if (__isObservable(value)) return true;\r\n\r\n  return typeof value === 'object' && value.hasOwnProperty('_isScalar') && value.hasOwnProperty('source');\r\n}\r\n\r\nfunction __isFunction(value: any): boolean {\r\n  return value != null && typeof value === 'function';\r\n}\r\n\r\nfunction __isObservable(value: any): boolean {\r\n  if (value?.value != null && __isObservable(value?.value)) return true;\r\n\r\n  return (\r\n    value != null &&\r\n    typeof value === 'object' &&\r\n    (value?.constructor?.name === 'Observable' || (__isFunction(value.lift) && __isFunction(value.subscribe)))\r\n  );\r\n}\r\n\r\nfunction __isPromise(value: any): boolean {\r\n  if (value?.value != null && __isPromise(value?.value)) return true;\r\n\r\n  return value != null && Object.prototype.toString.call(value) === '[object Promise]';\r\n}\r\n\r\nfunction __isValidLocalStorageItem(val): boolean {\r\n  return !__isRxjsObservableObj(val) && !__isPromise(val);\r\n}\r\n\r\nfunction __isLocalStorageItem(val, isToLoadData = false): boolean {\r\n  let rv = __isValidLocalStorageItem(val) && val?.config?.localStorage === true && val?.date > 0;\r\n\r\n  if (isToLoadData) {\r\n    rv = rv && val.localStored === true;\r\n  }\r\n\r\n  return rv;\r\n}\r\n\r\nfunction __filterLocalStorageItems(state: any, isToLoadData?: boolean) {\r\n  if (state == null) return state;\r\n\r\n  let rv = {};\r\n  let _state = { ...state };\r\n\r\n  Object.entries(_state).forEach(([key, value]) => {\r\n    if (value != null && typeof value === 'object' && Object.keys(value).length > 0) {\r\n      //SUBKEY\r\n      rv[key] = { ..._state[key] };\r\n\r\n      Object.entries(value).forEach(([key2, value2]) => {\r\n        if (__isLocalStorageItem(value2, isToLoadData)) {\r\n          rv[key][key2] = { ...value2, localStored: true };\r\n        } else {\r\n          delete rv[key][key2];\r\n        }\r\n      });\r\n\r\n      if (Object.keys(rv[key]).length === 0) {\r\n        if (key in rv) delete rv[key];\r\n      }\r\n    } else {\r\n      if (key in rv) delete rv[key];\r\n    }\r\n  });\r\n\r\n  return rv;\r\n}\r\n\r\nfunction __updateLocalStorage() {\r\n  if (_keyshEnabled !== true || _keyshLocalStorageEnabled !== true) return null;\r\n\r\n  if (!_localStorage?.setItem) return;\r\n\r\n  let store_stateClone = __filterLocalStorageItems(store_state);\r\n\r\n  if (store_stateClone != null && typeof store_stateClone === 'object' && Object.keys(store_stateClone).length > 0) {\r\n    _localStorage.setItem(_localStorageParentKey, JSON.stringify(store_stateClone));\r\n  } else {\r\n    __clearLocalStorage();\r\n  }\r\n\r\n  if (false) _log('[updateLocalStorage]', JSON.stringify(store_stateClone, null, 2));\r\n  if (false) _log('[updateLocalStorage]', JSON.stringify(store_state, null, 2));\r\n}\r\n\r\nfunction __checkValidItemDate(objKeyValue: StoredValueModel): boolean {\r\n  let max = Number(objKeyValue.config?.maxTime);\r\n\r\n  if (objKeyValue.config.localStorage && _localStorageMaxGlobalTime > 0) {\r\n    max = max === 0 ? _localStorageMaxGlobalTime : Math.min(max, _localStorageMaxGlobalTime);\r\n  }\r\n\r\n  if (!(max > 0)) return true;\r\n\r\n  let now = Date.now().valueOf();\r\n  let date = Number(objKeyValue.date);\r\n  let maxDate = date + max;\r\n\r\n  return !(now > maxDate);\r\n}\r\n\r\nfunction __getLocalStorageClass() {\r\n  return _localStorage;\r\n}\r\n\r\nfunction __setLocalStoredToStore() {\r\n  if (_keyshEnabled !== true || _keyshLocalStorageEnabled !== true) return null;\r\n\r\n  if (_localStorage?.getItem == null || !_localStorageParentKey?.length) return;\r\n  if (!_isTest && _localStorageLoaded) return;\r\n\r\n  const dataStored = _localStorage.getItem(_localStorageParentKey);\r\n\r\n  if (dataStored == null) return;\r\n\r\n  let storeStateObject = JSON.parse(dataStored);\r\n\r\n  if (storeStateObject != null) {\r\n    store_state = __filterLocalStorageItems(storeStateObject, true);\r\n    _localStorageLoaded = true;\r\n  }\r\n}\r\n\r\nfunction __getLocalStorageGlobalKey() {\r\n  return _localStorageParentKey;\r\n}\r\n\r\nfunction __setLocalStorageGlobals(\r\n  parentKey: string,\r\n  maxGlobalTime: number = null,\r\n  enabled: boolean = null,\r\n  localStorageEnabled: boolean = null\r\n) {\r\n  if (parentKey == null && maxGlobalTime == null && enabled == null && localStorageEnabled == null) return;\r\n\r\n  __clearLocalStorage();\r\n\r\n  if (parentKey != null) _localStorageParentKey = parentKey;\r\n\r\n  if (maxGlobalTime != null) _localStorageMaxGlobalTime = maxGlobalTime;\r\n\r\n  if (enabled != null) _keyshEnabled = !!enabled;\r\n\r\n  if (localStorageEnabled != null) _keyshLocalStorageEnabled = !!localStorageEnabled;\r\n}\r\n\r\nfunction __clearLocalStorage() {\r\n  if (_localStorage?.removeItem == null) return;\r\n\r\n  _localStorage.removeItem(_localStorageParentKey);\r\n\r\n  _localStorageLoaded = false;\r\n}\r\n\r\nfunction __getStoreState() {\r\n  if (store_state == null) return null;\r\n\r\n  return Object.freeze({ ...store_state } as any);\r\n}\r\n\r\nfunction __simulateRefresh() {\r\n  if (_isTest) {\r\n    if (false) _log('[simulateRefresh]');\r\n    store_state = {};\r\n    __setLocalStoredToStore();\r\n  }\r\n}\r\n\r\nconst __simpleCacheStore = {\r\n  setCacheValue,\r\n  getCacheValue,\r\n  resetCache,\r\n  resetAllCaches,\r\n  memoFunction,\r\n  memoFunctionDecorator,\r\n  resetMemoFunction,\r\n  __getLocalStorageClass,\r\n  __setLocalStoredToStore,\r\n  __clearLocalStorage,\r\n  __getLocalStorageGlobalKey,\r\n  __getStoreState,\r\n  __sortStoredValueModelByDate,\r\n  __simulateRefresh,\r\n  __setLocalStorageGlobals,\r\n  __isPromise,\r\n};\r\n\r\nexport { __simpleCacheStore };\r\n","import { of } from 'rxjs';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { isObservable } from 'rxjs/internal/util/isObservable';\r\nimport { shareReplay, tap } from 'rxjs/operators';\r\nimport { DefaultConfigCacheModel, __simpleCacheStore } from './simple-cache-store';\r\n\r\nconst getRxjsObservableCacheValue = (key: string, argsToHash?: any): Observable<any> => {\r\n  const cache = __simpleCacheStore.getCacheValue(key, argsToHash);\r\n\r\n  if (cache == null) return cache;\r\n\r\n  if (isObservable(cache)) return cache;\r\n\r\n  return of(cache);\r\n};\r\n\r\nconst setRxjsObservableCacheValue = (\r\n  stream: Observable<any>,\r\n  key: string,\r\n  argsToHash?: any,\r\n  config?: DefaultConfigCacheModel\r\n): Observable<any> => {\r\n  if (stream == null || key == null) return of(null);\r\n\r\n  const setCache = ($data: any) => {\r\n    if ($data != null) __simpleCacheStore.setCacheValue(key, $data, argsToHash, config);\r\n  };\r\n\r\n  let cacheReplay = stream.pipe(shareReplay());\r\n\r\n  setCache(cacheReplay);\r\n\r\n  return cacheReplay.pipe(\r\n    shareReplay(),\r\n    tap((_data: any) => setCache(_data))\r\n  );\r\n};\r\n\r\nconst __rxCacheStore = {\r\n  getRxjsObservableCacheValue,\r\n  setRxjsObservableCacheValue,\r\n  resetCache: __simpleCacheStore.resetCache,\r\n  resetAllCaches: __simpleCacheStore.resetAllCaches,\r\n};\r\n\r\nexport { __rxCacheStore as __rxjsCacheStore };\r\n"],"names":["__strToHash","str","hash","i","chr","length","charCodeAt","toString","getShortValue","val","Number","isInteger","String","Array","isArray","__objToHash","fast","undefined","shortValue","JSON","stringify","_localStorageParentKey","_localStorageMaxGlobalTime","_localStorage","_localStorageLoaded","_keyshEnabled","_keyshLocalStorageEnabled","memoFuncPrefixId","window","localStorage","defaultConfig","maxTime","maxItems","store_state","setCacheValue","key","value","argsToHash","config","_hash","_obj","date","Date","now","valueOf","localStored","stateObjs","obj","Object","keys","__sortStoredValueModelByDate","__isValidLocalStorageItem","__updateLocalStorage","__isPromise","then","_val","getCacheValue","__setLocalStoredToStore","objKeyValue","__checkValidItemDate","freeze","resetCache","resetLocalStorage","__isLocalStorageItem","resetAllCaches","__clearLocalStorage","memoFunction","func","prefixId","funcName","name","funcKey","object","restArgs","cache","res","apply","resetMemoFunction","funcOrName","memoizedReset","memoFunctionDecorator","instanceMap","WeakMap","target","propertyKey","descriptor","input","TypeError","writable","get","has","set","StoredValuel","max","Infinity","entries","sort","a","b","slice","reduce","r","k","v","__isRxjsObservableObj","__isObservable","hasOwnProperty","__isFunction","constructor","lift","subscribe","prototype","call","isToLoadData","rv","__filterLocalStorageItems","state","_state","forEach","key2","value2","setItem","store_stateClone","Math","min","maxDate","__getLocalStorageClass","getItem","dataStored","storeStateObject","parse","__getLocalStorageGlobalKey","__setLocalStorageGlobals","parentKey","maxGlobalTime","enabled","localStorageEnabled","removeItem","__getStoreState","__simulateRefresh","__simpleCacheStore","getRxjsObservableCacheValue","isObservable","of","setRxjsObservableCacheValue","stream","setCache","$data","cacheReplay","pipe","shareReplay","tap","_data","__rxCacheStore"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;SAAgBA,YAAYC;MAAAA;AAAAA,IAAAA,MAAM;;;AAChC,MAAIC,IAAI,GAAG,CAAX;AAAA,MACEC,CADF;AAAA,MAEEC,GAFF;;AAIA,OAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGF,GAAG,CAACI,MAApB,EAA4BF,CAAC,EAA7B,EAAiC;AAC/BC,IAAAA,GAAG,GAAGH,GAAG,CAACK,UAAJ,CAAeH,CAAf,CAAN;AACAD,IAAAA,IAAI,GAAG,CAACA,IAAI,IAAI,CAAT,IAAcA,IAAd,GAAqBE,GAA5B;AACAF,IAAAA,IAAI,IAAI,CAAR;AACD;;AAED,SAAOA,IAAI,CAACK,QAAL,CAAc,EAAd,CAAP;AACD;;AAED,SAASC,aAAT,CAAuBC,GAAvB;AACE,MAAIC,MAAM,CAACC,SAAP,CAAiBF,GAAjB,KAAyBG,MAAM,CAACH,GAAD,CAAN,CAAYJ,MAAzC,EAAiD,OAAO,SAASI,GAAhB;;AAEjD,MAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAC3B,QAAIA,GAAG,CAACJ,MAAJ,KAAe,CAAnB,EAAsB,OAAO,eAAP;AACtB,WAAO,SAASI,GAAhB;AACD;;AAED,MAAII,KAAK,CAACC,OAAN,CAAcL,GAAd,CAAJ,EAAwB;AACtB,QAAIA,GAAG,CAACJ,MAAJ,KAAe,CAAnB,EAAsB,OAAO,cAAP;;AAEtB,QAAII,GAAG,CAACJ,MAAJ,KAAe,CAAnB,EAAsB;AACpB,UAAIK,MAAM,CAACC,SAAP,CAAiBF,GAAG,CAAC,CAAD,CAApB,KAA4BG,MAAM,CAACH,GAAG,CAAC,CAAD,CAAJ,CAAN,CAAeJ,MAA/C,EAAuD,OAAO,UAAUI,GAAG,CAAC,CAAD,CAApB;;AAEvD,UAAI,OAAOA,GAAG,CAAC,CAAD,CAAV,KAAkB,QAAtB,EAAgC;AAC9B,YAAIA,GAAG,CAAC,CAAD,CAAH,CAAOJ,MAAP,KAAkB,CAAtB,EAAyB,OAAO,gBAAP;AACzB,eAAO,UAAUI,GAAG,CAAC,CAAD,CAApB;AACD;AACF;AACF;;AAED,SAAO,IAAP;AACD;;SAEeM,YAAYN,KAAUO;MAAAA;AAAAA,IAAAA,OAAO;;;AAC3C,MAAIP,GAAG,KAAKQ,SAAZ,EAAuB,OAAO,eAAP;AACvB,MAAIR,GAAG,KAAK,IAAZ,EAAkB,OAAO,UAAP;;AAElB,MAAIO,IAAJ,EAAU;AACR,QAAIE,UAAU,GAAGV,aAAa,CAACC,GAAD,CAA9B;AACA,QAAIS,UAAU,IAAI,IAAd,IAAsBA,UAAU,CAACb,MAAX,GAAoB,CAA1C,IAA+Ca,UAAU,CAACb,MAAX,GAAoB,EAAvE,EAA2E,OAAOa,UAAP;AAC5E;;AAED,SAAOlB,WAAW,CAACmB,IAAI,CAACC,SAAL,CAAeX,GAAf,CAAD,CAAlB;AACD;;;ACxCD,IAAIY,sBAAsB,GAAG,UAA7B;AACA,IAAIC,0BAA0B,GAAG,CAAjC;;AACA,IAAIC,aAAJ;;AACA,IAAIC,mBAAmB,GAAG,KAA1B;AACA,IAAIC,aAAa,GAAG,IAApB;AACA,IAAIC,yBAAyB,GAAG,IAAhC;AAGA,IAAMC,gBAAgB,GAAG,yBAAzB;AAEAJ,aAAa,cAAGK,MAAH,qBAAG,QAAQC,YAAxB;AAuBA,IAAMC,aAAa,GAA4B;AAC7CD,EAAAA,YAAY,EAAE,KAD+B;AAE7CE,EAAAA,OAAO,EAAE,CAFoC;AAG7CC,EAAAA,QAAQ,EAAE;AAHmC,CAA/C;AAMA,IAAIC,WAAW,GAA4B,EAA3C;;AAEA,SAASC,aAAT,CAAuBC,GAAvB,EAAoCC,KAApC,EAAgDC,UAAhD,EAAkEC,MAAlE;;;AACE,MAAIb,aAAa,KAAK,IAAtB,EAA4B;AAC5B,MAAIU,GAAG,IAAI,IAAX,EAAiB;AACjB,MAAIC,KAAK,KAAKnB,SAAd,EAAyB;;AAEzB,MAAMsB,KAAK,GAAGxB,WAAW,CAACsB,UAAD,CAAzB;;AAEA,MAAMG,IAAI,GAAG;AACXJ,IAAAA,KAAK,EAALA,KADW;AAEXK,IAAAA,IAAI,EAAEC,IAAI,CAACC,GAAL,GAAWC,OAAX,EAFK;AAGXC,IAAAA,WAAW,EAAE,KAHF;AAIXP,IAAAA,MAAM,eACDR,aADC,EAEAQ,MAAM,aAAKL,WAAW,CAACE,GAAD,CAAX,IAAoB,EAAzB,qBAAI,KAA0BG,MAA9B,CAFN;AAJK,GAAb;;AAWA,MAAIQ,SAAS,gBACRb,WAAW,CAACE,GAAD,CADH,6BAEVI,KAFU,IAEFC,IAFE,aAAb;;;AAMA,MAAIR,QAAQ,GAAGtB,MAAM,CAAC8B,IAAD,mCAACA,IAAI,CAAEF,MAAP,qBAAC,YAAcN,QAAf,CAArB;AACA,MAAIe,GAAG,GAAGd,WAAW,CAACE,GAAD,CAArB;AACA,MAAIY,GAAG,IAAI,IAAP,IAAeC,MAAM,CAACC,IAAP,CAAYF,GAAZ,EAAiB1C,MAAjB,GAA0BK,MAAM,CAACsB,QAAD,CAAnD,EAA+Dc,SAAS,GAAGI,4BAA4B,CAACJ,SAAD,EAAYd,QAAZ,CAAxC;AAE/DC,EAAAA,WAAW,CAACE,GAAD,CAAX,GAAmBW,SAAnB;AAEA,AAEA,MAAIK,yBAAyB,CAACf,KAAD,CAAzB,IAAoC,CAAAE,MAAM,QAAN,YAAAA,MAAM,CAAET,YAAR,MAAyB,IAAjE,EAAuEuB,oBAAoB;;AAG3F,MAAIC,WAAW,CAACjB,KAAD,CAAf,EAAwB;AACtBA,IAAAA,KAAK,CAACkB,IAAN,CAAW,UAAAC,IAAI;AACb,UAAIA,IAAI,IAAI,IAAZ,EAAkBrB,aAAa,CAACC,GAAD,EAAMoB,IAAN,EAAYlB,UAAZ,EAAwBC,MAAxB,CAAb;AACnB,KAFD;AAGD;AACF;;AAED,SAASkB,aAAT,CAAuBrB,GAAvB,EAAoCE,UAApC;;;AACE,MAAIZ,aAAa,KAAK,IAAtB,EAA4B,OAAO,IAAP;AAE5B,MAAI,CAAQ,OAAOG,MAAP,KAAkB,WAA1B,IAAyCJ,mBAAmB,KAAK,KAArE,EAA4EiC,uBAAuB;AAEnG,MAAIxB,WAAW,CAACE,GAAD,CAAX,IAAoB,IAAxB,EAA8B,OAAOF,WAAW,CAACE,GAAD,CAAlB;;AAE9B,MAAMI,KAAK,GAAGxB,WAAW,CAACsB,UAAD,CAAzB;;AACA,MAAMqB,WAAW,GAAqBzB,WAAW,CAACE,GAAD,CAAX,CAAiBI,KAAjB,CAAtC;AACA,MAAImB,WAAW,IAAI,IAAnB,EAAyB,OAAOA,WAAP;AAEzB;AAGA,MAAI,CAAC,uBAAAA,WAAW,CAACpB,MAAZ,iCAAoBP,OAApB,IAA+B2B,WAAW,CAACpB,MAAZ,CAAmBT,YAAnD,KAAoE,CAAC8B,oBAAoB,CAACD,WAAD,CAA7F,EAA4G,OAAO,IAAP;AAE5G,MAAIA,WAAW,CAACtB,KAAZ,IAAqB,IAAzB,EAA+B,OAAOsB,WAAW,CAACtB,KAAnB;AAE/B,MAAI,OAAOsB,WAAW,CAACtB,KAAnB,KAA6B,QAAjC,EAA2C,OAAOY,MAAM,CAACY,MAAP,CAAcF,WAAW,CAACtB,KAA1B,CAAP;AAE3C,SAAOsB,WAAW,CAACtB,KAAnB;AACD;;AAED,SAASyB,UAAT,CAAoB1B,GAApB,EAAiCE,UAAjC;AACE,MAAIF,GAAG,IAAI,IAAX,EAAiB;;AAEjB,MAAIE,UAAU,KAAKpB,SAAnB,EAA8B;AAC5B,QAAMsB,KAAK,GAAGxB,WAAW,CAACsB,UAAD,CAAzB;;AACA,QAAIJ,WAAW,IAAIE,GAAG,IAAIF,WAAtB,IAAqCM,KAAK,IAAIN,WAAW,CAACE,GAAD,CAA7D,EAAoE;AAClE,UAAI2B,iBAAiB,GAAGC,oBAAoB,CAAC9B,WAAW,CAACE,GAAD,CAAX,CAAiBI,KAAjB,CAAD,CAA5C;;AAEA,aAAON,WAAW,CAACE,GAAD,CAAX,CAAiBI,KAAjB,CAAP;AAEA,UAAIuB,iBAAJ,EAAuBV,oBAAoB;AAC5C;;AACD;AACD;;AAED,MAAInB,WAAW,IAAIE,GAAG,IAAIF,WAA1B,EAAuC;AACrC,WAAOA,WAAW,CAACE,GAAD,CAAlB;;AACAiB,IAAAA,oBAAoB;AACrB;AACF;;AAED,SAASY,cAAT;AACE/B,EAAAA,WAAW,GAAG,EAAd;;AACAgC,EAAAA,mBAAmB;AACpB;;AAED,SAASC,YAAT,CAAsBC,IAAtB,EAAsCC,QAAtC,EAA2E9B,MAA3E;;;MAAsC8B;AAAAA,IAAAA,WAAmBzC;;;AACvD,MAAI0C,QAAQ,GAAGF,IAAI,CAACG,IAAL,IAAa,YAA5B;AACA,MAAIC,OAAO,GAAGH,QAAQ,GAAGD,IAAI,CAACG,IAA9B;AAEA,AAEA,MAAIE,MAAM,0BACPH,QADO,IACI;sCAAYI;AAAAA,MAAAA;;;AACtB,QAAMC,KAAK,GAAGlB,aAAa,CAACe,OAAD,EAAUE,QAAV,CAA3B;AACA,QAAIC,KAAK,KAAKzD,SAAd,EAAyB,OAAOyD,KAAP;AAEzB,QAAMC,GAAG,GAAGR,IAAI,CAACS,KAAL,CAAW,IAAX,EAAiBH,QAAjB,CAAZ;AACAvC,IAAAA,aAAa,CAACqC,OAAD,EAAUI,GAAV,EAAeF,QAAf,EAAyBnC,MAAzB,CAAb;AACA,WAAOqC,GAAP;AACD,GARO,UAAV;AAWA,SAAOH,MAAM,CAACH,QAAD,CAAb;AACD;;AAED,SAASQ,iBAAT,CAA2BC,UAA3B,EAA0DV,QAA1D;MAA0DA;AAAAA,IAAAA,WAAmBzC;;;AAC3E,MAAI4C,OAAJ;;AAEA,MAAI,OAAOO,UAAP,KAAsB,QAA1B,EAAoC;AAClCP,IAAAA,OAAO,GAAGH,QAAQ,GAAGU,UAArB;AACD,GAFD,MAEO;AACLP,IAAAA,OAAO,GAAGH,QAAQ,GAAGU,UAAU,CAACR,IAAhC;AACD;;AAED,MAAMS,aAAa,GAAG,SAAhBA,aAAgB;uCAAYN;AAAAA,MAAAA;;;AAChC,QAAIA,QAAQ,KAAKxD,SAAb,IAA0BwD,QAAQ,CAACpE,MAAvC,EAA+C;AAC7CwD,MAAAA,UAAU,CAACU,OAAD,EAAUE,QAAV,CAAV;AACD,KAFD,MAEO;AACLZ,MAAAA,UAAU,CAACU,OAAD,CAAV;AACD;AACF,GAND;;AAQA,SAAOQ,aAAP;AACD;;AAED,SAASC,qBAAT,CAA+B1C,MAA/B,EAAiE8B,QAAjE;AACE,MAAMa,WAAW,GAAG,IAAIC,OAAJ,EAApB;AACA,SAAO,UAACC,MAAD,EAASC,WAAT,EAAsBC,UAAtB;AACL,QAAMC,KAAK,GAAGH,MAAM,CAACC,WAAD,CAApB;;AAEA,QAAI,OAAOE,KAAP,KAAiB,UAArB,EAAiC;AAC/B,YAAM,IAAIC,SAAJ,CAAc,wCAAd,CAAN;AACD;;AAED,WAAOF,UAAU,CAACjD,KAAlB;AACA,WAAOiD,UAAU,CAACG,QAAlB;;AAEAH,IAAAA,UAAU,CAACI,GAAX,GAAiB;AACf,UAAI,CAACR,WAAW,CAACS,GAAZ,CAAgB,IAAhB,CAAL,EAA4B;AAC1B,YAAMtD,KAAK,GAAG8B,YAAY,CAACoB,KAAD,EAAQlB,QAAR,EAAkB9B,MAAlB,CAA1B;AACA2C,QAAAA,WAAW,CAACU,GAAZ,CAAgB,IAAhB,EAAsBvD,KAAtB;AACA,eAAOA,KAAP;AACD;;AACD,aAAO6C,WAAW,CAACQ,GAAZ,CAAgB,IAAhB,CAAP;AACD,KAPD;AAQD,GAlBD;AAmBD;;AAED,SAASvC,4BAAT,CAAsC0C,YAAtC,EAAyEC,GAAzE;MAAyEA;AAAAA,IAAAA,MAAcC;;;AACrF,SAAO9C,MAAM,CAAC+C,OAAP,cAAoBH,YAApB,GACJI,IADI,CACC;AAAA,QAAIC,CAAJ;AAAA,QAAWC,CAAX;AAAA,WAAkBxF,MAAM,CAACwF,CAAC,CAACzD,IAAH,CAAN,GAAiB/B,MAAM,CAACuF,CAAC,CAACxD,IAAH,CAAzC;AAAA,GADD,EAEJ0D,KAFI,CAEE,CAFF,EAEKN,GAFL,EAGJO,MAHI,CAGG,UAACC,CAAD;AAAA;;AAAA,QAAKC,CAAL;AAAA,QAAQC,CAAR;AAAA,wBAAqBF,CAArB,6BAAyBC,CAAzB,IAA6BC,CAA7B;AAAA,GAHH,EAGsC,EAHtC,CAAP;AAID;;AAED,SAASC,qBAAT,CAA+BpE,KAA/B;AACE,MAAIA,KAAK,IAAI,IAAb,EAAmB,OAAO,KAAP;AAEnB,MAAIqE,cAAc,CAACrE,KAAD,CAAlB,EAA2B,OAAO,IAAP;AAE3B,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACsE,cAAN,CAAqB,WAArB,CAA7B,IAAkEtE,KAAK,CAACsE,cAAN,CAAqB,QAArB,CAAzE;AACD;;AAED,SAASC,YAAT,CAAsBvE,KAAtB;AACE,SAAOA,KAAK,IAAI,IAAT,IAAiB,OAAOA,KAAP,KAAiB,UAAzC;AACD;;AAED,SAASqE,cAAT,CAAwBrE,KAAxB;;;AACE,MAAI,CAAAA,KAAK,QAAL,YAAAA,KAAK,CAAEA,KAAP,KAAgB,IAAhB,IAAwBqE,cAAc,CAACrE,KAAD,oBAACA,KAAK,CAAEA,KAAR,CAA1C,EAA0D,OAAO,IAAP;AAE1D,SACEA,KAAK,IAAI,IAAT,IACA,OAAOA,KAAP,KAAiB,QADjB,KAEC,CAAAA,KAAK,QAAL,kCAAAA,KAAK,CAAEwE,WAAP,wCAAoBtC,IAApB,MAA6B,YAA7B,IAA8CqC,YAAY,CAACvE,KAAK,CAACyE,IAAP,CAAZ,IAA4BF,YAAY,CAACvE,KAAK,CAAC0E,SAAP,CAFvF,CADF;AAKD;;AAED,SAASzD,WAAT,CAAqBjB,KAArB;AACE,MAAI,CAAAA,KAAK,QAAL,YAAAA,KAAK,CAAEA,KAAP,KAAgB,IAAhB,IAAwBiB,WAAW,CAACjB,KAAD,oBAACA,KAAK,CAAEA,KAAR,CAAvC,EAAuD,OAAO,IAAP;AAEvD,SAAOA,KAAK,IAAI,IAAT,IAAiBY,MAAM,CAAC+D,SAAP,CAAiBxG,QAAjB,CAA0ByG,IAA1B,CAA+B5E,KAA/B,MAA0C,kBAAlE;AACD;;AAED,SAASe,yBAAT,CAAmC1C,GAAnC;AACE,SAAO,CAAC+F,qBAAqB,CAAC/F,GAAD,CAAtB,IAA+B,CAAC4C,WAAW,CAAC5C,GAAD,CAAlD;AACD;;AAED,SAASsD,oBAAT,CAA8BtD,GAA9B,EAAmCwG,YAAnC;;;MAAmCA;AAAAA,IAAAA,eAAe;;;AAChD,MAAIC,EAAE,GAAG/D,yBAAyB,CAAC1C,GAAD,CAAzB,IAAkC,CAAAA,GAAG,QAAH,2BAAAA,GAAG,CAAE6B,MAAL,iCAAaT,YAAb,MAA8B,IAAhE,IAAwE,CAAApB,GAAG,QAAH,YAAAA,GAAG,CAAEgC,IAAL,IAAY,CAA7F;;AAEA,MAAIwE,YAAJ,EAAkB;AAChBC,IAAAA,EAAE,GAAGA,EAAE,IAAIzG,GAAG,CAACoC,WAAJ,KAAoB,IAA/B;AACD;;AAED,SAAOqE,EAAP;AACD;;AAED,SAASC,yBAAT,CAAmCC,KAAnC,EAA+CH,YAA/C;AACE,MAAIG,KAAK,IAAI,IAAb,EAAmB,OAAOA,KAAP;AAEnB,MAAIF,EAAE,GAAG,EAAT;;AACA,MAAIG,MAAM,gBAAQD,KAAR,CAAV;;AAEApE,EAAAA,MAAM,CAAC+C,OAAP,CAAesB,MAAf,EAAuBC,OAAvB,CAA+B;QAAEnF;QAAKC;;AACpC,QAAIA,KAAK,IAAI,IAAT,IAAiB,OAAOA,KAAP,KAAiB,QAAlC,IAA8CY,MAAM,CAACC,IAAP,CAAYb,KAAZ,EAAmB/B,MAAnB,GAA4B,CAA9E,EAAiF;AAC/E;AACA6G,MAAAA,EAAE,CAAC/E,GAAD,CAAF,gBAAekF,MAAM,CAAClF,GAAD,CAArB;AAEAa,MAAAA,MAAM,CAAC+C,OAAP,CAAe3D,KAAf,EAAsBkF,OAAtB,CAA8B;YAAEC;YAAMC;;AACpC,YAAIzD,oBAAoB,CAACyD,MAAD,EAASP,YAAT,CAAxB,EAAgD;AAC9CC,UAAAA,EAAE,CAAC/E,GAAD,CAAF,CAAQoF,IAAR,iBAAqBC,MAArB;AAA6B3E,YAAAA,WAAW,EAAE;AAA1C;AACD,SAFD,MAEO;AACL,iBAAOqE,EAAE,CAAC/E,GAAD,CAAF,CAAQoF,IAAR,CAAP;AACD;AACF,OAND;;AAQA,UAAIvE,MAAM,CAACC,IAAP,CAAYiE,EAAE,CAAC/E,GAAD,CAAd,EAAqB9B,MAArB,KAAgC,CAApC,EAAuC;AACrC,YAAI8B,GAAG,IAAI+E,EAAX,EAAe,OAAOA,EAAE,CAAC/E,GAAD,CAAT;AAChB;AACF,KAfD,MAeO;AACL,UAAIA,GAAG,IAAI+E,EAAX,EAAe,OAAOA,EAAE,CAAC/E,GAAD,CAAT;AAChB;AACF,GAnBD;AAqBA,SAAO+E,EAAP;AACD;;AAED,SAAS9D,oBAAT;;;AACE,MAAI3B,aAAa,KAAK,IAAlB,IAA0BC,yBAAyB,KAAK,IAA5D,EAAkE,OAAO,IAAP;AAElE,MAAI,oBAACH,aAAD,aAAC,eAAekG,OAAhB,CAAJ,EAA6B;;AAE7B,MAAIC,gBAAgB,GAAGP,yBAAyB,CAAClF,WAAD,CAAhD;;AAEA,MAAIyF,gBAAgB,IAAI,IAApB,IAA4B,OAAOA,gBAAP,KAA4B,QAAxD,IAAoE1E,MAAM,CAACC,IAAP,CAAYyE,gBAAZ,EAA8BrH,MAA9B,GAAuC,CAA/G,EAAkH;AAChHkB,IAAAA,aAAa,CAACkG,OAAd,CAAsBpG,sBAAtB,EAA8CF,IAAI,CAACC,SAAL,CAAesG,gBAAf,CAA9C;AACD,GAFD,MAEO;AACLzD,IAAAA,mBAAmB;AACpB;AAIF;;AAED,SAASN,oBAAT,CAA8BD,WAA9B;;;AACE,MAAImC,GAAG,GAAGnF,MAAM,yBAACgD,WAAW,CAACpB,MAAb,qBAAC,qBAAoBP,OAArB,CAAhB;;AAEA,MAAI2B,WAAW,CAACpB,MAAZ,CAAmBT,YAAnB,IAAmCP,0BAA0B,GAAG,CAApE,EAAuE;AACrEuE,IAAAA,GAAG,GAAGA,GAAG,KAAK,CAAR,GAAYvE,0BAAZ,GAAyCqG,IAAI,CAACC,GAAL,CAAS/B,GAAT,EAAcvE,0BAAd,CAA/C;AACD;;AAED,MAAI,EAAEuE,GAAG,GAAG,CAAR,CAAJ,EAAgB,OAAO,IAAP;AAEhB,MAAIlD,GAAG,GAAGD,IAAI,CAACC,GAAL,GAAWC,OAAX,EAAV;AACA,MAAIH,IAAI,GAAG/B,MAAM,CAACgD,WAAW,CAACjB,IAAb,CAAjB;AACA,MAAIoF,OAAO,GAAGpF,IAAI,GAAGoD,GAArB;AAEA,SAAO,EAAElD,GAAG,GAAGkF,OAAR,CAAP;AACD;;AAED,SAASC,sBAAT;AACE,SAAOvG,aAAP;AACD;;AAED,SAASkC,uBAAT;;;AACE,MAAIhC,aAAa,KAAK,IAAlB,IAA0BC,yBAAyB,KAAK,IAA5D,EAAkE,OAAO,IAAP;AAElE,MAAI,mBAAAH,aAAa,SAAb,2BAAewG,OAAf,KAA0B,IAA1B,IAAkC,2BAAC1G,sBAAD,aAAC,sBAAwBhB,MAAzB,CAAtC,EAAuE;AACvE,MAAI,CAAYmB,mBAAhB,EAAqC;;AAErC,MAAMwG,UAAU,GAAGzG,aAAa,CAACwG,OAAd,CAAsB1G,sBAAtB,CAAnB;;AAEA,MAAI2G,UAAU,IAAI,IAAlB,EAAwB;AAExB,MAAIC,gBAAgB,GAAG9G,IAAI,CAAC+G,KAAL,CAAWF,UAAX,CAAvB;;AAEA,MAAIC,gBAAgB,IAAI,IAAxB,EAA8B;AAC5BhG,IAAAA,WAAW,GAAGkF,yBAAyB,CAACc,gBAAD,EAAmB,IAAnB,CAAvC;AACAzG,IAAAA,mBAAmB,GAAG,IAAtB;AACD;AACF;;AAED,SAAS2G,0BAAT;AACE,SAAO9G,sBAAP;AACD;;AAED,SAAS+G,wBAAT,CACEC,SADF,EAEEC,aAFF,EAGEC,OAHF,EAIEC,mBAJF;MAEEF;AAAAA,IAAAA,gBAAwB;;;MACxBC;AAAAA,IAAAA,UAAmB;;;MACnBC;AAAAA,IAAAA,sBAA+B;;;AAE/B,MAAIH,SAAS,IAAI,IAAb,IAAqBC,aAAa,IAAI,IAAtC,IAA8CC,OAAO,IAAI,IAAzD,IAAiEC,mBAAmB,IAAI,IAA5F,EAAkG;;AAElGvE,EAAAA,mBAAmB;;AAEnB,MAAIoE,SAAS,IAAI,IAAjB,EAAuBhH,sBAAsB,GAAGgH,SAAzB;AAEvB,MAAIC,aAAa,IAAI,IAArB,EAA2BhH,0BAA0B,GAAGgH,aAA7B;AAE3B,MAAIC,OAAO,IAAI,IAAf,EAAqB9G,aAAa,GAAG,CAAC,CAAC8G,OAAlB;AAErB,MAAIC,mBAAmB,IAAI,IAA3B,EAAiC9G,yBAAyB,GAAG,CAAC,CAAC8G,mBAA9B;AAClC;;AAED,SAASvE,mBAAT;;;AACE,MAAI,mBAAA1C,aAAa,SAAb,2BAAekH,UAAf,KAA6B,IAAjC,EAAuC;;AAEvClH,EAAAA,aAAa,CAACkH,UAAd,CAAyBpH,sBAAzB;;AAEAG,EAAAA,mBAAmB,GAAG,KAAtB;AACD;;AAED,SAASkH,eAAT;AACE,MAAIzG,WAAW,IAAI,IAAnB,EAAyB,OAAO,IAAP;AAEzB,SAAOe,MAAM,CAACY,MAAP,cAAmB3B,WAAnB,EAAP;AACD;;AAED,SAAS0G,iBAAT;AACE,AAKD;;AAED,IAAMC,kBAAkB,GAAG;AACzB1G,EAAAA,aAAa,EAAbA,aADyB;AAEzBsB,EAAAA,aAAa,EAAbA,aAFyB;AAGzBK,EAAAA,UAAU,EAAVA,UAHyB;AAIzBG,EAAAA,cAAc,EAAdA,cAJyB;AAKzBE,EAAAA,YAAY,EAAZA,YALyB;AAMzBc,EAAAA,qBAAqB,EAArBA,qBANyB;AAOzBH,EAAAA,iBAAiB,EAAjBA,iBAPyB;AAQzBiD,EAAAA,sBAAsB,EAAtBA,sBARyB;AASzBrE,EAAAA,uBAAuB,EAAvBA,uBATyB;AAUzBQ,EAAAA,mBAAmB,EAAnBA,mBAVyB;AAWzBkE,EAAAA,0BAA0B,EAA1BA,0BAXyB;AAYzBO,EAAAA,eAAe,EAAfA,eAZyB;AAazBxF,EAAAA,4BAA4B,EAA5BA,4BAbyB;AAczByF,EAAAA,iBAAiB,EAAjBA,iBAdyB;AAezBP,EAAAA,wBAAwB,EAAxBA,wBAfyB;AAgBzB/E,EAAAA,WAAW,EAAXA;AAhByB,CAA3B;;ACxXA,IAAMwF,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAC1G,GAAD,EAAcE,UAAd;AAClC,MAAMqC,KAAK,GAAGkE,kBAAkB,CAACpF,aAAnB,CAAiCrB,GAAjC,EAAsCE,UAAtC,CAAd;;AAEA,MAAIqC,KAAK,IAAI,IAAb,EAAmB,OAAOA,KAAP;AAEnB,MAAIoE,yBAAY,CAACpE,KAAD,CAAhB,EAAyB,OAAOA,KAAP;AAEzB,SAAOqE,OAAE,CAACrE,KAAD,CAAT;AACD,CARD;;AAUA,IAAMsE,2BAA2B,GAAG,SAA9BA,2BAA8B,CAClCC,MADkC,EAElC9G,GAFkC,EAGlCE,UAHkC,EAIlCC,MAJkC;AAMlC,MAAI2G,MAAM,IAAI,IAAV,IAAkB9G,GAAG,IAAI,IAA7B,EAAmC,OAAO4G,OAAE,CAAC,IAAD,CAAT;;AAEnC,MAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD;AACf,QAAIA,KAAK,IAAI,IAAb,EAAmBP,kBAAkB,CAAC1G,aAAnB,CAAiCC,GAAjC,EAAsCgH,KAAtC,EAA6C9G,UAA7C,EAAyDC,MAAzD;AACpB,GAFD;;AAIA,MAAI8G,WAAW,GAAGH,MAAM,CAACI,IAAP,CAAYC,qBAAW,EAAvB,CAAlB;AAEAJ,EAAAA,QAAQ,CAACE,WAAD,CAAR;AAEA,SAAOA,WAAW,CAACC,IAAZ,CACLC,qBAAW,EADN,EAELC,aAAG,CAAC,UAACC,KAAD;AAAA,WAAgBN,QAAQ,CAACM,KAAD,CAAxB;AAAA,GAAD,CAFE,CAAP;AAID,CApBD;;AAsBA,IAAMC,cAAc,GAAG;AACrBZ,EAAAA,2BAA2B,EAA3BA,2BADqB;AAErBG,EAAAA,2BAA2B,EAA3BA,2BAFqB;AAGrBnF,EAAAA,UAAU,EAAE+E,kBAAkB,CAAC/E,UAHV;AAIrBG,EAAAA,cAAc,EAAE4E,kBAAkB,CAAC5E;AAJd,CAAvB;;;;;"}